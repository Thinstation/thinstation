#!/bin/bash

if [ -n "$1" ]; then
        PKG=$1
	PKGSRC=`find /arch -name $1`
	mkdir /ts/ports/components/$1
	cp $PKGSRC/trunk/* /ts/ports/components/$1/. -a
	cd /ts/ports/components/$1
fi
src=PKGBUILD
dest=Pkgfile
mv PKGBUILD* PKGBUILD
if [ ! -e PKGBUILD ]; then
	echo "PKGBUILD not found"
	exit 1
fi
cp $src $dest
sed -i -e 's/pkgname/name/g' $dest
sed -i -e 's/pkgver/version/g' $dest
sed -i -e 's/pkgrel/release/g' $dest
sed -i -e 's/pkgdir/PKG/g' $dest
sed -i -e 's/srcdir/SRC/g' $dest
sed -i -e '/^pkgdesc/d' $dest
sed -i -e '/^arch/d' $dest
sed -i -e '/^url/d' $dest
sed -i -e '/^depends/d' $dest
sed -i -e '/^license/d' $dest
sed -i -e '/^sha512sum/d' $dest
sed -i -e '/^makedepends/d' $dest
sed -i -e '/^optdepends/d' $dest
sed -i -e '/^md5sums/d' $dest
